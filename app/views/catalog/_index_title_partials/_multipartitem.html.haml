%span.index_title
  - _counter = (counter + 1 + @response.params[:start].to_i)
  - if counter
    = _counter
  = "."
  = link_to_document document, :label=>document_show_link_field, :counter => _counter
  - if !(document[document_show_link_field].match(/\.$/))
    = "."
  - groups = get_groups(document)
  - if groups.length > 0
    %span.index_title
      - _links = groups.collect {|g| link_to_document(g,:label=>document_show_link_field)}
      %span.from_groups="From: #{_links.join(',')}."
  %span.index_metadata
    - if document["lib_date_facet"]
      = document["lib_date_facet"][0] + '.'
    - if document["lib_name_display"]
      = document["lib_name_display"][0] + '.'
    - if document["extent_t"]
      = document["extent_t"][0] + '.'
    = document["lib_repo_facet"]
    - if document["lib_collection_facet"]
      = " - " + document["lib_collection_facet"].join(',')
